(this["webpackJsonpcreate-react-app"]=this["webpackJsonpcreate-react-app"]||[]).push([[0],{30:function(t,e,c){"use strict";c.d(e,"a",(function(){return r})),c.d(e,"b",(function(){return g})),c.d(e,"c",(function(){return _}));var n=c(2),r={fetchContactsRequest:Object(n.b)("phonebook/fetchContactsRequest"),fetchContactsSuccess:Object(n.b)("phonebook/fetchContactsSuccess"),fetchContactsError:Object(n.b)("phonebook/fetchContactsError"),addContactRequest:Object(n.b)("phonebook/addContactRequest"),addContactSuccess:Object(n.b)("phonebook/addContactSuccess"),addContactError:Object(n.b)("phonebook/addContactError"),deleteContactRequest:Object(n.b)("phonebook/deleteContactRequest"),deleteContactSuccess:Object(n.b)("phonebook/deleteContactSuccess"),deleteContactError:Object(n.b)("phonebook/deleteContactError"),changeFilter:Object(n.b)("phonebook/changeFilter")},a=c(13),o=c.n(a),u=r.fetchContactsRequest,s=r.fetchContactsSuccess,i=(r.fetchContactsError,r.addContactRequest),b=r.addContactSuccess,l=r.addContactError,j=r.deleteContactRequest,d=r.deleteContactSuccess,h=r.deleteContactError;o.a.defaults.baseURL="https://connections-api.herokuapp.com";var O,f,g={fetchContacts:function(){return function(t){t(u()),o.a.get("/contacts").then((function(e){var c=e.data;return t(s(c))})).catch((function(e){return t(l(e))}))}},addContact:function(t,e){return function(c){var n={name:t,number:e};c(i()),o.a.post("/contacts",n).then((function(t){var e=t.data;return c(b(e))})).catch((function(t){return c(l(t))}))}},deleteContact:function(t){return function(e){e(j()),o.a.delete("/contacts/".concat(t)).then((function(){return e(d(t))})).catch((function(t){return e(h(t))}))}}},C=c(3),p=c(24),v=c(6),x=r.fetchContactsRequest,m=r.fetchContactsSuccess,S=r.fetchContactsError,k=r.addContactRequest,E=r.addContactSuccess,R=r.addContactError,q=r.deleteContactRequest,U=r.deleteContactSuccess,y=r.deleteContactError,A=r.changeFilter,N=Object(n.c)([],(O={},Object(C.a)(O,m,(function(t,e){return e.payload})),Object(C.a)(O,E,(function(t,e){var c=e.payload;return[].concat(Object(p.a)(t),[c])})),Object(C.a)(O,U,(function(t,e){var c=e.payload;return t.filter((function(t){return t.id!==c}))})),O)),T=Object(n.c)("",Object(C.a)({},A,(function(t,e){return e.payload}))),I=Object(n.c)(!1,(f={},Object(C.a)(f,x,(function(){return!0})),Object(C.a)(f,m,(function(){return!1})),Object(C.a)(f,S,(function(){return!1})),Object(C.a)(f,k,(function(){return!0})),Object(C.a)(f,E,(function(){return!1})),Object(C.a)(f,R,(function(){return!1})),Object(C.a)(f,q,(function(){return!0})),Object(C.a)(f,U,(function(){return!1})),Object(C.a)(f,y,(function(){return!1})),f)),_=Object(v.b)({contacts:N,filter:T,loading:I})},39:function(t,e,c){},43:function(t,e,c){},73:function(t,e,c){},75:function(t,e,c){},80:function(t,e,c){},82:function(t,e,c){"use strict";c.r(e);var n=c(0),r=c.n(n),a=c(21),o=c.n(a),u=c(15),s=c(40),i=c(24),b=c(2),l=c(17),j=c(41),d=c.n(j),h=c(30),O=c(9),f=Object(i.a)(Object(b.d)({serializableCheck:{ignoredActions:[l.a,l.f,l.b,l.c,l.d,l.e]}})),g={key:"auth",storage:d.a,whitelist:["token"]},C=Object(b.a)({reducer:{auth:Object(l.g)(g,O.b),contacts:h.c},middleware:f,devTools:!1}),p={store:C,persistor:Object(l.h)(C)},v=c(5),x=c(8),m=(c(73),c(1)),S=function(t){var e=t.children;return Object(m.jsx)("div",{className:"Container",children:e})};c(75),c(39);function k(){var t=Object(x.c)(O.c.getIsAuthenticated);return Object(m.jsxs)("nav",{children:[Object(m.jsx)(u.b,{to:"/",exact:!0,className:"nav-link",activeClassName:"nav-link__active",children:"Main"}),t&&Object(m.jsx)(u.b,{to:"/contacts",exact:!0,className:"nav-link",activeClassName:"nav-link__active",children:"Contacts"})]})}var E=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(u.b,{to:"/register",exact:!0,className:"nav-link",activeClassName:"nav-link__active",children:"Registration"}),Object(m.jsx)(u.b,{to:"/login",exact:!0,className:"nav-link",activeClassName:"nav-link__active",children:"Log In"})]})},R=c.p+"static/media/defaultAvatar.12e39dc7.jpg";c(80);function q(){var t=Object(x.b)(),e=Object(x.c)(O.c.getUsername);return Object(m.jsxs)("div",{className:"user-container",children:[Object(m.jsx)("img",{src:R,alt:"",width:"32",className:"user-avatar"}),Object(m.jsxs)("span",{className:"user-name",children:["Welcome, ",e]}),Object(m.jsx)("button",{type:"button",onClick:function(){return t(O.a.logOut())},className:"user-btn",children:"Logout"})]})}function U(){var t=Object(x.c)(O.c.getIsAuthenticated);return Object(m.jsxs)("header",{className:"app-header",children:[Object(m.jsx)(k,{}),t?Object(m.jsx)(q,{}):Object(m.jsx)(E,{})]})}var y=c(16),A=c(23),N=["isAuthenticated","redirectTo","children"];function T(t){t.isAuthenticated;var e=t.redirectTo,c=t.children,n=Object(A.a)(t,N),r=Object(x.c)(O.c.getIsAuthenticated);return Object(m.jsx)(v.b,Object(y.a)(Object(y.a)({},n),{},{children:r&&n.restricted?Object(m.jsx)(v.a,{to:e}):c}))}var I=["isAuthenticated","redirectTo","children"];function _(t){t.isAuthenticated;var e=t.redirectTo,c=t.children,n=Object(A.a)(t,I),r=Object(x.c)(O.c.getIsAuthenticated);return Object(m.jsx)(v.b,Object(y.a)(Object(y.a)({},n),{},{children:r?c:Object(m.jsx)(v.a,{to:e})}))}var z=Object(n.lazy)((function(){return c.e(6).then(c.bind(null,91))})),F=Object(n.lazy)((function(){return c.e(5).then(c.bind(null,92))})),L=Object(n.lazy)((function(){return c.e(4).then(c.bind(null,93))})),w=Object(n.lazy)((function(){return c.e(3).then(c.bind(null,90))}));function B(){var t=Object(x.b)();return Object(n.useEffect)((function(){t(O.a.getCurrentUser())}),[t]),Object(m.jsxs)(S,{children:[Object(m.jsx)(U,{}),Object(m.jsx)(n.Suspense,{fallback:Object(m.jsx)("h3",{children:"Loading..."}),children:Object(m.jsxs)(v.d,{children:[Object(m.jsx)(T,{exact:!0,path:"/",children:Object(m.jsx)(z,{})}),Object(m.jsx)(T,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(m.jsx)(F,{})}),Object(m.jsx)(T,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(m.jsx)(L,{})}),Object(m.jsx)(_,{path:"/contacts",redirectTo:"/login",children:Object(m.jsx)(w,{})})]})})]})}var J=function(t){t&&t instanceof Function&&c.e(7).then(c.bind(null,89)).then((function(e){var c=e.getCLS,n=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;c(t),n(t),r(t),a(t),o(t)}))};c(81),c(43);o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(x.a,{store:p.store,children:Object(m.jsx)(s.a,{loading:null,persistor:p.persistor,children:Object(m.jsx)(u.a,{children:Object(m.jsx)(B,{})})})})}),document.getElementById("root")),J()},9:function(t,e,c){"use strict";c.d(e,"b",(function(){return S})),c.d(e,"a",(function(){return U})),c.d(e,"c",(function(){return y}));var n,r,a,o,u=c(2),s=Object(u.b)("auth/registerRequest"),i=Object(u.b)("auth/registerSuccess"),b=Object(u.b)("auth/registerError"),l=Object(u.b)("auth/loginRequest"),j=Object(u.b)("auth/loginSuccess"),d=Object(u.b)("auth/loginError"),h={registerRequest:s,registerSuccess:i,registerError:b,logoutRequest:Object(u.b)("auth/logoutRequest"),logoutSuccess:Object(u.b)("auth/logoutSuccess"),logoutError:Object(u.b)("auth/logoutError"),loginRequest:l,loginSuccess:j,loginError:d,getCurrentUserRequest:Object(u.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(u.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(u.b)("auth/getCurrentUserError")},O=c(3),f=c(6),g={name:null,email:null},C=Object(u.c)(g,(n={},Object(O.a)(n,h.registerSuccess,(function(t,e){return e.payload.user})),Object(O.a)(n,h.loginSuccess,(function(t,e){return e.payload.user})),Object(O.a)(n,h.logoutSuccess,(function(){return g})),Object(O.a)(n,h.getCurrentUserSuccess,(function(t,e){return e.payload})),n)),p=Object(u.c)(null,(r={},Object(O.a)(r,h.registerSuccess,(function(t,e){return e.payload.token})),Object(O.a)(r,h.loginSuccess,(function(t,e){return e.payload.token})),Object(O.a)(r,h.logoutSuccess,(function(){return null})),r)),v=function(t,e){return e.payload},x=Object(u.c)(null,(a={},Object(O.a)(a,h.registerError,v),Object(O.a)(a,h.loginError,v),Object(O.a)(a,h.logoutError,v),Object(O.a)(a,h.getCurrentUserError,v),a)),m=Object(u.c)(!1,(o={},Object(O.a)(o,h.registerSuccess,(function(){return!0})),Object(O.a)(o,h.loginSuccess,(function(){return!0})),Object(O.a)(o,h.getCurrentUserSuccess,(function(){return!0})),Object(O.a)(o,h.registerError,(function(){return!1})),Object(O.a)(o,h.loginError,(function(){return!1})),Object(O.a)(o,h.getCurrentUserError,(function(){return!1})),Object(O.a)(o,h.logoutSuccess,(function(){return!1})),o)),S=Object(f.b)({user:C,isAuthenticated:m,token:p,error:x}),k=c(13),E=c.n(k);E.a.defaults.baseURL="https://connections-api.herokuapp.com";var R=function(t){E.a.defaults.headers.common.Authorization="Bearer ".concat(t)},q=function(){E.a.defaults.headers.common.Authorization=""},U={register:function(t){return function(e){e(h.registerRequest()),E.a.post("/users/signup",t).then((function(t){var c=t.data;R(c.token),e(h.registerSuccess(c))})).catch((function(t){var c=t.message;return e(h.registerError(c))}))}},logOut:function(){return function(t){t(h.logoutRequest()),E.a.post("/users/logout").then((function(){q(),t(h.logoutSuccess())})).catch((function(e){var c=e.message;return t(h.logoutError(c))}))}},logIn:function(t){return function(e){e(h.loginRequest()),E.a.post("/users/login",t).then((function(t){var c=t.data;console.log(c),R(c.token),e(h.loginSuccess(c))})).catch((function(t){var c=t.message;return e(h.loginError(c))}))}},getCurrentUser:function(){return function(t,e){var c=e().auth.token;c&&(R(c),t(h.getCurrentUserRequest()),E.a.get("/users/current").then((function(e){var c=e.data;t(h.getCurrentUserSuccess(c))})).catch((function(e){var c=e.message;return t(h.getCurrentUserError(c))})))}}},y={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name}}}},[[82,1,2]]]);
//# sourceMappingURL=main.14ec916b.chunk.js.map